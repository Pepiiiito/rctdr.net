<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vehicle RC Imprès en 3D — Adrià González</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Rajdhani:wght@300;400;600;700&display=swap');

  :root {
    --red: #ff2020;
    --orange: #ff6b00;
    --dark: #070707;
    --mid: #111111;
    --light: #f0ece4;
    --gray: #555;
    --accent: #ff3a00;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  html { scroll-behavior: smooth; }

  body {
    background: var(--dark);
    color: var(--light);
    font-family: 'Rajdhani', sans-serif;
    overflow-x: hidden;
    cursor: none;
  }

  .cursor {
    position: fixed;
    width: 12px;
    height: 12px;
    background: var(--red);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease, width 0.3s, height 0.3s;
    mix-blend-mode: difference;
  }
  .cursor-ring {
    position: fixed;
    width: 40px;
    height: 40px;
    border: 1px solid rgba(255,32,32,0.5);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9998;
    transform: translate(-50%, -50%);
    transition: all 0.15s ease;
  }

  #hero {
    height: 100vh;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  #hero-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }

  .hero-content {
    position: relative;
    z-index: 10;
    text-align: center;
  }

  .hero-eyebrow {
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 6px;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 20px;
    opacity: 0;
    animation: fadeUp 1s 0.3s forwards;
  }

  .hero-title {
    font-family: 'Bebas Neue', cursive;
    font-size: clamp(60px, 14vw, 180px);
    line-height: 0.9;
    letter-spacing: -2px;
    background: linear-gradient(135deg, #fff 0%, #ff6b00 50%, #ff2020 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    opacity: 0;
    animation: fadeUp 1s 0.5s forwards;
  }

  .hero-sub {
    font-family: 'Rajdhani', sans-serif;
    font-size: clamp(18px, 3vw, 28px);
    font-weight: 300;
    letter-spacing: 3px;
    color: rgba(240,236,228,0.7);
    margin-top: 16px;
    opacity: 0;
    animation: fadeUp 1s 0.8s forwards;
  }

  .hero-author {
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    color: var(--gray);
    margin-top: 40px;
    opacity: 0;
    animation: fadeUp 1s 1.1s forwards;
  }

  .scroll-hint {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    opacity: 0;
    animation: fadeIn 1s 2s forwards;
  }
  .scroll-hint span {
    font-family: 'Space Mono', monospace;
    font-size: 9px;
    letter-spacing: 4px;
    color: var(--gray);
  }
  .scroll-line {
    width: 1px;
    height: 60px;
    background: linear-gradient(to bottom, var(--red), transparent);
    animation: scrollPulse 2s infinite;
  }

  #car3d {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }

  #three-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* allow page scroll; viewer is auto-rotating */
  }

  .car3d-label {
    position: absolute;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 5px;
    color: var(--accent);
    text-transform: uppercase;
    z-index: 10;
    animation: pulse 2s infinite;
  }

  .drag-hint {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,32,32,0.1);
    border: 1px solid rgba(255,32,32,0.3);
    padding: 10px 30px;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 3px;
    color: rgba(240,236,228,0.6);
    z-index: 10;
  }

  section {
    padding: 120px 60px;
    max-width: 1400px;
    margin: 0 auto;
  }

  .section-tag {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 6px;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 16px;
    display: block;
  }

  .section-title {
    font-family: 'Bebas Neue', cursive;
    font-size: clamp(48px, 8vw, 100px);
    line-height: 0.95;
    margin-bottom: 60px;
    color: var(--light);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    margin-bottom: 100px;
  }

  .stat-card {
    background: var(--mid);
    padding: 48px 32px;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s;
  }
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 3px;
    height: 0;
    background: var(--accent);
    transition: height 0.4s ease;
  }
  .stat-card:hover::before { height: 100%; }
  .stat-card:hover { transform: translateY(-4px); }

  .stat-num {
    font-family: 'Bebas Neue', cursive;
    font-size: 72px;
    color: var(--accent);
    line-height: 1;
  }
  .stat-label {
    font-size: 14px;
    letter-spacing: 2px;
    color: var(--gray);
    text-transform: uppercase;
    font-weight: 600;
    margin-top: 8px;
  }
  .stat-desc {
    font-size: 13px;
    color: rgba(240,236,228,0.5);
    margin-top: 8px;
    line-height: 1.5;
  }

  .timeline {
    position: relative;
    padding-left: 80px;
  }
  .timeline::before {
    content: '';
    position: absolute;
    left: 16px;
    top: 0; bottom: 0;
    width: 1px;
    background: linear-gradient(to bottom, var(--accent), transparent);
  }

  .timeline-item {
    margin-bottom: 60px;
    position: relative;
    opacity: 0;
    transform: translateX(-20px);
    transition: all 0.6s ease;
  }
  .timeline-item.visible {
    opacity: 1;
    transform: translateX(0);
  }
  .timeline-item::before {
    content: '';
    position: absolute;
    left: -71px;
    top: 6px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 20px var(--accent);
  }

  .timeline-phase {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 4px;
    color: var(--accent);
    margin-bottom: 6px;
  }
  .timeline-title {
    font-family: 'Bebas Neue', cursive;
    font-size: 36px;
    margin-bottom: 10px;
    color: var(--light);
  }
  .timeline-text {
    font-size: 16px;
    line-height: 1.7;
    color: rgba(240,236,228,0.65);
    max-width: 600px;
  }

  .components-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
  }

  .comp-card {
    background: var(--mid);
    padding: 40px;
    position: relative;
    overflow: hidden;
  }
  .comp-card:hover .comp-bg { opacity: 1; }
  .comp-bg {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 50%, rgba(255,58,0,0.08), transparent 70%);
    opacity: 0;
    transition: opacity 0.5s;
  }
  .comp-icon {
    font-size: 40px;
    margin-bottom: 20px;
  }
  .comp-name {
    font-family: 'Bebas Neue', cursive;
    font-size: 28px;
    color: var(--light);
    margin-bottom: 8px;
  }
  .comp-spec {
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    color: var(--accent);
    letter-spacing: 2px;
    margin-bottom: 12px;
  }
  .comp-desc {
    font-size: 14px;
    line-height: 1.6;
    color: rgba(240,236,228,0.55);
  }

  #motor-section {
    background: #0a0a0a;
    padding: 120px 60px;
    margin: 0;
    max-width: 100%;
  }

  .motor-wrap {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }

  #motor-canvas-wrap {
    height: 400px;
    position: relative;
  }
  #motor-canvas {
    width: 100%;
    height: 100%;
  }

  .motor-info .kv-display {
    font-family: 'Bebas Neue', cursive;
    font-size: 120px;
    color: var(--accent);
    line-height: 1;
  }
  .motor-info .kv-label {
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    letter-spacing: 4px;
    color: var(--gray);
    margin-bottom: 40px;
  }

  .rpm-bar-wrap {
    margin-top: 30px;
  }
  .rpm-label {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--gray);
    margin-bottom: 6px;
    display: flex;
    justify-content: space-between;
  }
  .rpm-bar {
    height: 4px;
    background: rgba(255,255,255,0.05);
    border-radius: 2px;
    margin-bottom: 16px;
    overflow: hidden;
  }
  .rpm-bar-fill {
    height: 100%;
    background: linear-gradient(to right, var(--orange), var(--red));
    border-radius: 2px;
    width: 0;
    transition: width 2s ease;
  }

  .results-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2px;
    margin-top: 60px;
  }

  .result-card {
    padding: 50px;
    position: relative;
    overflow: hidden;
  }
  .result-card.positive {
    background: rgba(34,197,94,0.06);
    border: 1px solid rgba(34,197,94,0.25);
  }
  .result-card.negative {
    background: rgba(255,32,32,0.04);
    border: 1px solid rgba(255,32,32,0.15);
  }
  .result-tag {
    font-family: 'Space Mono', monospace;
    font-size: 9px;
    letter-spacing: 4px;
    margin-bottom: 20px;
    display: block;
  }
  .positive .result-tag { color: #22c55e; }
  .negative .result-tag { color: var(--red); }
  .result-title {
    font-family: 'Bebas Neue', cursive;
    font-size: 32px;
    margin-bottom: 12px;
  }
  .result-text {
    font-size: 15px;
    line-height: 1.6;
    color: rgba(240,236,228,0.6);
  }

  .battery-viz {
    display: flex;
    gap: 40px;
    align-items: flex-end;
    margin-top: 40px;
    flex-wrap: wrap;
  }

  .batt-bar {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  .batt-bar-track {
    width: 80px;
    height: 200px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    position: relative;
    border-radius: 4px;
    overflow: hidden;
  }
  .batt-bar-fill {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: linear-gradient(to top, var(--accent), var(--orange));
    transition: height 2s ease;
    height: 0;
  }
  .batt-time {
    font-family: 'Bebas Neue', cursive;
    font-size: 28px;
    color: var(--light);
  }
  .batt-amperes {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    color: var(--gray);
    letter-spacing: 2px;
  }

  #conclusion {
    min-height: 60vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    background: radial-gradient(ellipse at center, rgba(255,32,32,0.06) 0%, transparent 70%);
    padding: 120px 60px;
    max-width: 100%;
  }
  #conclusion .inner {
    max-width: 900px;
    margin: 0 auto;
  }
  .conclusion-quote {
    font-family: 'Bebas Neue', cursive;
    font-size: clamp(40px, 7vw, 90px);
    line-height: 1.1;
    color: var(--light);
    margin-bottom: 40px;
  }
  .conclusion-text {
    font-size: 18px;
    line-height: 1.8;
    color: rgba(240,236,228,0.6);
    margin-bottom: 50px;
  }

  .cta-link {
    display: inline-block;
    padding: 18px 60px;
    border: 1px solid var(--accent);
    color: var(--light);
    text-decoration: none;
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 4px;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
  }
  .cta-link::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--accent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s;
  }
  .cta-link:hover::before { transform: scaleX(1); }
  .cta-link span { position: relative; z-index: 1; }

  footer {
    padding: 40px 60px;
    border-top: 1px solid rgba(255,255,255,0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    color: var(--gray);
    letter-spacing: 2px;
  }

  .noise {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 100;
    opacity: 0.025;
  }

  .marquee-wrap {
    overflow: hidden;
    border-top: 1px solid rgba(255,255,255,0.06);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    padding: 20px 0;
    background: #0a0a0a;
  }
  .marquee {
    display: flex;
    gap: 0;
    animation: marquee 20s linear infinite;
    white-space: nowrap;
  }
  .marquee-item {
    font-family: 'Bebas Neue', cursive;
    font-size: 24px;
    letter-spacing: 4px;
    color: rgba(255,255,255,0.12);
    padding: 0 40px;
  }
  .marquee-item span { color: var(--accent); }

  nav {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 500;
    padding: 24px 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(to bottom, rgba(7,7,7,0.9), transparent);
    backdrop-filter: blur(4px);
  }
  .nav-logo {
    font-family: 'Bebas Neue', cursive;
    font-size: 28px;
    color: var(--accent);
    letter-spacing: 2px;
  }
  .nav-links {
    display: flex;
    gap: 40px;
    list-style: none;
  }
  .nav-links a {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 3px;
    color: rgba(240,236,228,0.5);
    text-decoration: none;
    text-transform: uppercase;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--accent); }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    to { opacity: 1; }
  }
  @keyframes scrollPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }
  @keyframes marquee {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  @media (max-width: 900px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .components-grid { grid-template-columns: 1fr; }
    .results-grid { grid-template-columns: 1fr; }
    .motor-wrap { grid-template-columns: 1fr; }
    nav { padding: 20px 24px; }
    section { padding: 80px 24px; }
    .nav-links { display: none; }
  }
</style>
</head>
<body>

<div class="noise"></div>
<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursor-ring"></div>

<nav>
  <div class="nav-logo">RC·3D</div>
  <ul class="nav-links">
    <li><a href="#about">Projecte</a></li>
    <li><a href="#car3d">Model 3D</a></li>
    <li><a href="#components">Components</a></li>
    <li><a href="#results">Resultats</a></li>
  </ul>
</nav>

<div id="hero">
  <canvas id="hero-canvas"></canvas>
  <div class="hero-content">
    <p class="hero-eyebrow">Treball de Recerca · 2025-26</p>
    <h1 class="hero-title">VEHICLE<br>RC 3D</h1>
    <p class="hero-sub">IMPRÈS · DISSENYAT · CONSTRUÏT</p>
    <p class="hero-author">Adrià González Domènech — Institut Berenguer d'Entença</p>
  </div>
  <div class="scroll-hint">
    <div class="scroll-line"></div>
    <span>SCROLL</span>
  </div>
</div>

<div class="marquee-wrap">
  <div class="marquee">
    <span class="marquee-item">BRUSHLESS MOTOR <span>6500KV</span></span>
    <span class="marquee-item">IMPRESSIÓ <span>3D</span></span>
    <span class="marquee-item">FUSION 360</span>
    <span class="marquee-item">LIPO <span>2200mAh</span></span>
    <span class="marquee-item">CONTROL REMOT <span>2.4GHz</span></span>
    <span class="marquee-item">PLA · PETG · TPU</span>
    <span class="marquee-item">BRUSHLESS MOTOR <span>6500KV</span></span>
    <span class="marquee-item">IMPRESSIÓ <span>3D</span></span>
    <span class="marquee-item">FUSION 360</span>
    <span class="marquee-item">LIPO <span>2200mAh</span></span>
    <span class="marquee-item">CONTROL REMOT <span>2.4GHz</span></span>
    <span class="marquee-item">PLA · PETG · TPU</span>
  </div>
</div>

<section id="about">
  <span class="section-tag">// 01 — Dades del Projecte</span>
  <h2 class="section-title">NÚMEROS<br>QUE HO DIUEN TOT</h2>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-num" data-target="48100">0</div>
      <div class="stat-label">RPM màximes</div>
      <div class="stat-desc">Motor a 6500Kv alimentat amb 7.4V LiPo</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" data-target="17">0</div>
      <div class="stat-label">Impressions de prova</div>
      <div class="stat-desc">Iteració constant per perfeccionar cada peça</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" data-target="26">0</div>
      <div class="stat-label">Minuts d'autonomia</div>
      <div class="stat-desc">Bateria 2200mAh a intensitat baixa-moderada</div>
    </div>
  </div>
</section>

<div id="car3d">
  <canvas id="three-canvas"></canvas>
  <div class="drag-hint">〈 ROTACIÓ AUTOMÀTICA 〉</div>
  <div class="car3d-label">MODEL 3D INTERACTIU</div>
</div>

<section>
  <span class="section-tag">// 02 — Metodologia</span>
  <h2 class="section-title">EL PROCÉS</h2>
  <div class="timeline">
    <div class="timeline-item">
      <div class="timeline-phase">FASE 01</div>
      <div class="timeline-title">RECERCA I ESBOSSOS</div>
      <div class="timeline-text">Documentació exhaustiva sobre vehicles RC, tipologies, components i funcionament. Primers esbossos a mà de la direcció i el xassís, amb ajuda del cosí Rai.</div>
    </div>
    <div class="timeline-item">
      <div class="timeline-phase">FASE 02</div>
      <div class="timeline-title">DISSENY AMB FUSION 360</div>
      <div class="timeline-text">Aprenentatge accelerat de Fusion 360. De TinkerCAD a modelatge professional. Disseny iteratiu de xassís, sistema de direcció i transmissió.</div>
    </div>
    <div class="timeline-item">
      <div class="timeline-phase">FASE 03</div>
      <div class="timeline-title">IMPRESSIÓ I PROTOTIPAT</div>
      <div class="timeline-text">Bambu Lab A1 com a eina principal. Materials: PLA mat, PETG. 800-900g de material. Problemes de warping resolts amb adhesiu.</div>
    </div>
    <div class="timeline-item">
      <div class="timeline-phase">FASE 04</div>
      <div class="timeline-title">MUNTATGE I ELECTRÒNICA</div>
      <div class="timeline-text">Motor Hobbywing 6500Kv, ESC, servo, receptor 2.4GHz i bateria LiPo. Engranatge 35T + pinyó 15T, distància 25mm.</div>
    </div>
    <div class="timeline-item">
      <div class="timeline-phase">FASE 05</div>
      <div class="timeline-title">PROVES I RESULTATS</div>
      <div class="timeline-text">Vehicle fully funcional. Velocitat superior a l'esperada. Direcció i suspensió TPU operatiu. Pendent: calibratge fi d'alineació.</div>
    </div>
  </div>
</section>

<section id="components">
  <span class="section-tag">// 03 — Components</span>
  <h2 class="section-title">EL COR<br>DE LA MÀQUINA</h2>
  <div class="components-grid">
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">⚡</div>
      <div class="comp-name">Motor Brushless</div>
      <div class="comp-spec">HOBBYWING QUICKRUN · 6500KV</div>
      <div class="comp-desc">Motor Inrunner amb sensors. L'eix d'acer sobresurt on s'instal·la el pinyó. Alta densitat de potència.</div>
    </div>
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">🔋</div>
      <div class="comp-name">Bateria LiPo</div>
      <div class="comp-spec">OVONIC · 7.4V · 2200mAh</div>
      <div class="comp-desc">2S LiPo de polímer de liti recarregable. Autonomia de 6 a 26 minuts.</div>
    </div>
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">📡</div>
      <div class="comp-name">Radio Control</div>
      <div class="comp-spec">2.4GHz · DIGITAL</div>
      <div class="comp-desc">Transmissor i receptor digitals. Sense interferències, connexió estable.</div>
    </div>
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">⚙️</div>
      <div class="comp-name">Transmissió</div>
      <div class="comp-spec">35T + PINYÓ 15T</div>
      <div class="comp-desc">Engranatges helicoidals. Distància entre centres 25mm. Módulo coincident.</div>
    </div>
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">🖨️</div>
      <div class="comp-name">Impressió 3D</div>
      <div class="comp-spec">BAMBU LAB A1 · PLA + PETG + TPU</div>
      <div class="comp-desc">PLA per a prototips, PETG per a peces estructurals, TPU per a suspensió.</div>
    </div>
    <div class="comp-card">
      <div class="comp-bg"></div>
      <div class="comp-icon">🔄</div>
      <div class="comp-name">Suspensió</div>
      <div class="comp-spec">TPU · SISTEMA ADAPTAT</div>
      <div class="comp-desc">Peces en TPU i làmina posterior per esmorteir cops. Simplicitat de muntatge.</div>
    </div>
  </div>
</section>

<div id="motor-section">
  <div class="motor-wrap">
    <div id="motor-canvas-wrap">
      <canvas id="motor-canvas"></canvas>
    </div>
    <div class="motor-info">
      <span class="section-tag">// 04 — Motor</span>
      <div class="kv-display">6500</div>
      <div class="kv-label">KV — REVOLUCIONS PER VOLT</div>
      <div class="rpm-bar-wrap">
        <div class="rpm-label"><span>1V → 6,500 RPM</span><span>6.5K</span></div>
        <div class="rpm-bar"><div class="rpm-bar-fill" style="width:13%"></div></div>
        <div class="rpm-label"><span>5.7V → 37,050 RPM</span><span>37K</span></div>
        <div class="rpm-bar"><div class="rpm-bar-fill" style="width:77%"></div></div>
        <div class="rpm-label"><span>7.4V → 48,100 RPM</span><span>48.1K</span></div>
        <div class="rpm-bar"><div class="rpm-bar-fill" style="width:100%"></div></div>
      </div>
    </div>
  </div>
</div>

<section>
  <span class="section-tag">// 05 — Autonomia</span>
  <h2 class="section-title">BATERIA<br>2200mAh</h2>
  <div class="battery-viz">
    <div class="batt-bar">
      <div class="batt-bar-track"><div class="batt-bar-fill" data-height="44"></div></div>
      <div class="batt-time">26.4 min</div>
      <div class="batt-amperes">5A</div>
    </div>
    <div class="batt-bar">
      <div class="batt-bar-track"><div class="batt-bar-fill" data-height="22"></div></div>
      <div class="batt-time">13.2 min</div>
      <div class="batt-amperes">10A</div>
    </div>
    <div class="batt-bar">
      <div class="batt-bar-track"><div class="batt-bar-fill" data-height="11"></div></div>
      <div class="batt-time">6.6 min</div>
      <div class="batt-amperes">20A (màx)</div>
    </div>
  </div>
</section>

<section id="results">
  <span class="section-tag">// 06 — Proves i Resultats</span>
  <h2 class="section-title">QUÈ VA PASSAR</h2>
  <div class="results-grid">
    <div class="result-card positive">
      <span class="result-tag">✓ Positiu</span>
      <div class="result-title">VELOCITAT SUPERIOR</div>
      <div class="result-text">Vehicle va superar les expectatives inicials. Sistema d'engranatges helicoïdals va ser l'elecció correcta.</div>
    </div>
    <div class="result-card positive">
      <span class="result-tag">✓ Positiu</span>
      <div class="result-title">COMPACTE I ESTABLE</div>
      <div class="result-text">Reduint dimensions vehicle guanyà estabilitat. La rigidesa del xassís PETG és excel·lent.</div>
    </div>
    <div class="result-card negative">
      <span class="result-tag">⚠ Millora</span>
      <div class="result-title">DESGAST ENGRANATGES</div>
      <div class="result-text">Amb ús intensiu els engranatges de PLA es degraden. Solució futura: PETG o metàl·lics.</div>
    </div>
    <div class="result-card negative">
      <span class="result-tag">⚠ Millora</span>
      <div class="result-title">CALIBRATGE DIRECCIÓ</div>
      <div class="result-text">Direcció funciona però necessita ajust fi. Alineament perfecte pendent per continuïtat.</div>
    </div>
  </div>
</section>

<div id="conclusion">
  <div class="inner">
    <h2 class="conclusion-quote">"No tenia coneixements, i això era un plus de motivació"</h2>
    <p class="conclusion-text">De zero a un prototip funcional. Aprenent Fusion 360, impressió 3D, electrònica i mecànica simultàniament. Un projecte que obre portes cap al futur.</p>
  </div>
</div>

<footer>
  <span>ADRIÀ GONZÁLEZ DOMÈNECH · 2025-26</span>
  <span>INSTITUT BERENGUER D'ENTENÇA</span>
  <span>TDR — BATXILLERAT TECNOLÒGIC</span>
</footer>

<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
<script>
// CURSOR
const cursor = document.getElementById('cursor');
const ring = document.getElementById('cursor-ring');
let mx = 0, my = 0;
document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cursor.style.left = mx + 'px';
  cursor.style.top = my + 'px';
  setTimeout(() => {
    ring.style.left = mx + 'px';
    ring.style.top = my + 'px';
  }, 80);
});

// HERO PARTICLES
(function() {
  const canvas = document.getElementById('hero-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, particles = [];

  function resize() {
    W = canvas.width = canvas.offsetWidth;
    H = canvas.height = canvas.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  for (let i = 0; i < 120; i++) {
    particles.push({
      x: Math.random() * W,
      y: Math.random() * H,
      r: Math.random() * 1.5 + 0.3,
      vx: (Math.random() - 0.5) * 0.4,
      vy: (Math.random() - 0.5) * 0.4,
      alpha: Math.random() * 0.5 + 0.1
    });
  }

  function animate() {
    ctx.clearRect(0, 0, W, H);
    ctx.strokeStyle = 'rgba(255,58,0,0.04)';
    ctx.lineWidth = 1;
    for (let x = 0; x < W; x += 80) {
      ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke();
    }
    for (let y = 0; y < H; y += 80) {
      ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke();
    }

    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < 120) {
          ctx.beginPath();
          ctx.strokeStyle = 'rgba(255,58,0,' + (1 - dist/120) * 0.08 + ')';
          ctx.lineWidth = 0.5;
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.stroke();
        }
      }
    }

    particles.forEach(p => {
      p.x += p.vx; p.y += p.vy;
      if (p.x < 0 || p.x > W) p.vx *= -1;
      if (p.y < 0 || p.y > H) p.vy *= -1;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255,58,0,' + p.alpha + ')';
      ctx.fill();
    });
    requestAnimationFrame(animate);
  }
  animate();
})();

// THREE.JS CAR (STL auto-rotate, no wheel/pan)
(function() {
  const canvas = document.getElementById('three-canvas');
  const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.shadowMap.enabled = true;

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
  camera.position.set(0, 3, 8);

  const hemi = new THREE.HemisphereLight(0xffffff, 0x111111, 0.6);
  scene.add(hemi);
  const sun = new THREE.DirectionalLight(0xfff5e0, 1.2);
  sun.position.set(5, 8, 5);
  sun.castShadow = true;
  scene.add(sun);
  const rimLight = new THREE.PointLight(0xff3a00, 1.6, 28);
  rimLight.position.set(-5, 2, -3);
  scene.add(rimLight);

  const modelGroup = new THREE.Group();
  scene.add(modelGroup);

  function resize() {
    const el = document.getElementById('car3d');
    const W = el.offsetWidth, H = el.offsetHeight;
    renderer.setSize(W, H);
    camera.aspect = W / H;
    camera.updateProjectionMatrix();
  }
  resize();
  window.addEventListener('resize', resize);

  function fitCameraToObject(obj) {
    const box = new THREE.Box3().setFromObject(obj);
    const size = box.getSize(new THREE.Vector3());
    const center = box.getCenter(new THREE.Vector3());
    const maxDim = Math.max(size.x, size.y, size.z);
    const dist = maxDim / Math.tan(THREE.MathUtils.degToRad(camera.fov * 0.5));
    camera.position.copy(center.clone().add(new THREE.Vector3(dist * 0.4, dist * 0.35, dist * 0.6)));
    camera.near = Math.max(0.01, maxDim / 500);
    camera.far = dist * 10;
    camera.updateProjectionMatrix();
    camera.lookAt(center);
  }

  function clearModel() {
    while (modelGroup.children.length) {
      const child = modelGroup.children.pop();
      child.geometry?.dispose?.();
      child.material?.dispose?.();
    }
  }

  function addPlaceholder() {
    clearModel();
    const geo = new THREE.BoxGeometry(3, 1, 5);
    const mat = new THREE.MeshStandardMaterial({ color: 0x202020, metalness: 0.25, roughness: 0.6 });
    const mesh = new THREE.Mesh(geo, mat);
    mesh.castShadow = mesh.receiveShadow = true;
    modelGroup.add(mesh);
    fitCameraToObject(modelGroup);
  }

  function loadSTL() {
    const loader = new THREE.STLLoader();
    loader.load('assets/rc-car.stl', (geometry) => {
      clearModel();
      geometry.rotateX(-Math.PI / 2);
      geometry.computeBoundingBox();
      const center = geometry.boundingBox.getCenter(new THREE.Vector3());
      geometry.translate(-center.x, -center.y, -center.z);
      geometry.computeBoundingBox();
      const yOffset = -geometry.boundingBox.min.y;
      const mat = new THREE.MeshStandardMaterial({ color: 0xff3a00, metalness: 0.2, roughness: 0.45 });
      const mesh = new THREE.Mesh(geometry, mat);
      mesh.castShadow = mesh.receiveShadow = true;
      mesh.position.y = yOffset;
      modelGroup.add(mesh);
      fitCameraToObject(modelGroup);
    }, undefined, (err) => {
      console.warn('No s\'ha pogut carregar l\'STL', err);
      addPlaceholder();
    });
  }

  function animate3D() {
    requestAnimationFrame(animate3D);
    modelGroup.rotation.y += 0.005; // auto-rotate
    renderer.render(scene, camera);
  }

  loadSTL();
  animate3D();
})();

// MOTOR CANVAS
(function() {
  const canvas = document.getElementById('motor-canvas');
  const ctx = canvas.getContext('2d');
  let W, H;
  function resize() {
    const wrap = document.getElementById('motor-canvas-wrap');
    W = canvas.width = wrap.offsetWidth;
    H = canvas.height = wrap.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  let angle = 0;
  function draw() {
    ctx.clearRect(0, 0, W, H);
    const cx = W / 2, cy = H / 2;
    const r = Math.min(W, H) * 0.35;

    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, Math.PI * 2);
    ctx.strokeStyle = 'rgba(255,255,255,0.1)';
    ctx.lineWidth = r * 0.22;
    ctx.stroke();

    for (let i = 0; i < 12; i++) {
      const a = (i / 12) * Math.PI * 2;
      const x1 = cx + Math.cos(a) * (r * 0.7);
      const y1 = cy + Math.sin(a) * (r * 0.7);
      const x2 = cx + Math.cos(a) * (r * 0.92);
      const y2 = cy + Math.sin(a) * (r * 0.92);
      ctx.beginPath();
      ctx.moveTo(x1, y1); ctx.lineTo(x2, y2);
      ctx.strokeStyle = i % 3 === 0 ? 'rgba(255,58,0,0.9)' : 'rgba(255,255,255,0.2)';
      ctx.lineWidth = 4;
      ctx.stroke();
    }

    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(angle);
    ctx.beginPath();
    ctx.arc(0, 0, r * 0.45, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(30,30,30,0.9)';
    ctx.fill();

    for (let i = 0; i < 8; i++) {
      const a = (i / 8) * Math.PI * 2;
      const mx = Math.cos(a) * r * 0.32;
      const my = Math.sin(a) * r * 0.32;
      ctx.beginPath();
      ctx.arc(mx, my, r * 0.07, 0, Math.PI * 2);
      ctx.fillStyle = i % 2 === 0 ? 'rgba(255,32,32,0.8)' : 'rgba(80,120,255,0.8)';
      ctx.fill();
    }

    ctx.beginPath();
    ctx.arc(0, 0, r * 0.09, 0, Math.PI * 2);
    ctx.fillStyle = '#aaa';
    ctx.fill();
    ctx.restore();

    const rpm = Math.round(6500 * 7.4);
    ctx.fillStyle = 'rgba(255,255,255,0.6)';
    ctx.font = 'bold ' + (r * 0.22) + 'px Courier';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(rpm.toLocaleString(), cx, cy + r * 1.5);

    angle += 0.08;
    requestAnimationFrame(draw);
  }
  draw();
})();

// COUNTERS
function animateCounter(el, target, duration) {
  let start = null;
  const step = (ts) => {
    if (!start) start = ts;
    const p = Math.min((ts - start) / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);
    el.textContent = Math.floor(ease * target).toLocaleString();
    if (p < 1) requestAnimationFrame(step);
    else el.textContent = target.toLocaleString();
  };
  requestAnimationFrame(step);
}

// OBSERVER
const io = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.classList.add('visible');
      if (e.target.dataset.target) {
        animateCounter(e.target, parseInt(e.target.dataset.target), 2000);
        io.unobserve(e.target);
      }
      if (e.target.classList.contains('batt-bar-fill')) {
        e.target.style.height = e.target.dataset.height + '%';
        io.unobserve(e.target);
      }
    }
  });
}, { threshold: 0.3 });

document.querySelectorAll('[data-target]').forEach(el => io.observe(el));
document.querySelectorAll('.batt-bar-fill').forEach(el => io.observe(el));
document.querySelectorAll('.timeline-item').forEach(el => io.observe(el));
document.querySelectorAll('.rpm-bar-fill').forEach(el => {
  const tw = el.style.width;
  el.style.width = '0';
  io.observe(el);
  const o2 = new IntersectionObserver(([e]) => {
    if (e.isIntersecting) {
      el.style.width = tw;
      o2.disconnect();
    }
  }, { threshold: 0.5 });
  o2.observe(el);
});
</script>
</body>
</html>
